<!--Load the AJAX API-->
<script type="text/javascript" src="https://www.google.com/jsapi"></script>
<script type="text/javascript">

// Load the Visualization API.
google.load('visualization', '1', {'packages':['corechart']});

// Set a callback to run when the Google Visualization API is loaded.
google.setOnLoadCallback(drawPieChart);

function drawPieChart() {
  $.ajax({
    url: "/data",
    dataType:"json"
  }).done(function(response) {
    // Convert JSON to Array
    var result = [['Hand' , 'Times Played:']];
    for(var key in response) {
      result.push([ key, response[key] ]);
    }
    // console.log('request done', response);
    // console.log('array produced', result);
    // Set options for display
    var options = {
          title: 'Number of Hand Types Played',
          width: 800,
          height: 400
        };
    // Create our data table out of JSON data loaded from server and converted to array
    var data = google.visualization.arrayToDataTable(result);

    // Create selector to target chart location on page
    var selector = document.getElementById('chart_div');
    // Instantiate and draw our chart, passing in some options.
    var chart = new google.visualization.PieChart(selector);
    chart.draw(data, options);
  });
}
</script>
